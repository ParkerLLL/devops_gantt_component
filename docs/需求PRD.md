# 甘特图组件产品需求文档 (PRD)

---

## 1. 项目概述
*   **1.1. 项目背景与目标**: 为了满足研发管理视角的需求，开发一个甘特图组件，用于可视化展示蓝鲸DevOps系统中各项目的进展情况.
*   **1.2. 核心用户**: 研发管理者、项目经理（PM）、团队负责人（Leader).
*   **1.3. 解决的核心问题**: 核心目标是直观地识别项目预期的交付风险，并清晰地跟踪过程中各类工作项的完成状态和数量.
*   **1.4. 项目范围**: [明确本次开发包含和不包含的内容。]

## 2. 用户故事
*   **As a** 项目经理, **I want to** 创建和维护项目计划，**so that** 我可以清晰地跟踪项目进度.
*   **As a** 开发人员, **I want to** 查看分配给我的任务及其依赖关系，**so that** 我可以合理安排我的工作.
*   **As a** 团队负责人, **I want to** 了解团队成员的资源负载情况，**so that** 我可以进行合理的资源调配.

## 3. 功能性需求

### 3.1. 任务（Task）展示
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 任务信息展示 | P0 | 甘特图的任务条上应直接展示关键信息，如 **任务名称** 和 **负责人**。 |
| 任务颜色编码 | P1 | 任务条的颜色可根据 **工作项类型** (如 需求、任务、缺陷) 或 **状态** (如 阻塞) 进行区分，以提供快速视觉反馈。 |
| 任务层级 | P1 | 支持父子任务关系，子任务的时间范围应在父任务之内。父任务的进度可根据子任务自动计算。 |

### 3.2. 时间轴（Timeline）
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 时间单位切换 | P0 | 支持按天、周、月、季度、年等不同时间粒度查看甘特图。 |
| 智能缩放 | P1 | 支持通过滚轮或按钮进行时间轴的缩放。 |
| 滚动与导航 | P0 | 支持水平滚动时间轴，提供“回到今天”的快捷按钮。 |
| 当前日期标记 | P0 | 在时间轴上清晰地标记出当前日期。 |

### 3.3. 依赖关系（Dependencies）
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 依赖类型 | P1 | 支持至少四种依赖关系：完成-开始 (FS), 开始-开始 (SS), 完成-完成 (FF), 开始-完成 (SF)。 |
| 依赖线可视化 | P0 | 在任务之间绘制清晰的依赖关系连线。 |
| 关键路径高亮 | P1 | 提供开关，一键高亮显示影响项目整体工期的关键路径上的所有任务。 |
| 缓冲时间可视化 | P2 | (可选) 以可视化的方式（如任务条后的虚线）展示任务的可延期时间（浮动时间）。 |

### 3.4. 里程碑（Milestones）
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 创建里程碑 | P0 | 支持将某个任务标记为里程碑，通常以特殊图形（如菱形）表示。 |
| 里程碑展示 | P0 | 在时间轴上清晰地展示里程碑节点。 |

### 3.5. 进度展示（Progress）
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 任务进度 | P0 | 任务条内部应有独立的进度条，用以表示任务的完成百分比。 |
| 延期任务高亮 | P0 | 若任务的当前进度落后于计划（基于当前日期），或已超过计划结束日期但未完成，则任务条应以醒目颜色（如红色）高亮。 |

### 3.6. 资源分配（Resource Allocation）
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 分配资源 | P2 | 支持将任务分配给一个或多个资源（如：团队成员）。 |
| 资源视图 | P2 | （可选）提供资源维度的视图，展示每个资源的负载情况。 |

### 3.7. 交互操作
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 悬浮提示 (Tooltip) | P0 | 鼠标悬浮在任务条上时，显示任务的核心信息摘要（名称、负责人、时间、状态）。 |
| 任务详情弹窗 | P0 | 点击任务条，可以弹出详情窗口，展示任务的全部信息，包括：**负责人、当前状态、优先级、工作项类型** 等。 |
| 链接到源系统 | P1 | 在详情弹窗中，提供一个直接链接，可以跳转回蓝鲸DevOps系统中的对应工作项页面。 |

### 3.8. 统计视图
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 工作项闭环统计 | P0 | 在甘特图的显眼位置（如顶部或侧边栏），展示关键工作项的闭环统计，格式为 “类型 (已完成/总数)”，例如：**需求 (85/100)**, **缺陷 (110/123)**。 |

### 3.9. 筛选功能
| 功能点 | 优先级 | 描述 |
|---|---|---|
| 多维度筛选 | P0 | 提供筛选器，支持用户按 **项目**、**负责人**、**工作项类型** 等一个或多个维度组合筛选甘特图上展示的任务。 |

## 4. 非功能性需求
*   **4.1. 性能需求**: 在包含 1000 个任务和 1000 个依赖关系的情况下，页面加载、滚动和交互操作应保持流畅，响应时间小于 200ms。
*   **4.2. 兼容性需求**: 兼容最新版本的 Chrome, Firefox, Safari, Edge 浏览器。
*   **4.3. 可扩展性需求**: 组件应提供丰富的 API 和事件回调，方便进行二次开发和功能扩展。样式易于定制。
*   **4.4. 数据导入/导出**: (可选) 支持从 MS Project, Excel 等格式导入/导出项目数据。

## 5. UI/UX 设计
*   **5.1. 界面布局**: 采用经典的左右布局模式：
    *   **左侧区域**: 可展开/折叠的任务列表区，展示任务层级和名称等信息。
    *   **右侧区域**: 时间轴图表区，可视化展示任务条、依赖线等。
    *   **顶部工具栏**: 放置 **筛选器** 和 **统计视图**。
    *   **图表右上角**: 放置 **时间轴缩放** 相关控件（放大、缩小、回到今天）。
*   **5.2. 色彩与样式**: [定义主题色、任务条颜色、依赖线样式等]
*   **5.3. 交互动画**: 定义拖拽、展开/折叠等操作的过渡动画，提升用户体验。

## 6. 技术与集成
*   **6.1. 技术栈**: 基于 **Vue 3** 框架进行开发。为确保完全的样式控制和长期兼容性，将不采用第三方甘特图成品库，而是基于底层图形库（如 **D3.js** 或直接使用 SVG/HTML）进行自研搭建。
*   **6.2. API 接口定义**: [定义组件初始化、数据加载、事件监听等相关的 API]
*   **6.3. 技术选型考量**: 自研搭建将提供最高的灵活性和定制化能力，但相比集成成品库，可能会需要更长的开发周期和更复杂的维护成本。项目初期需投入时间进行核心渲染和交互逻辑的研发。